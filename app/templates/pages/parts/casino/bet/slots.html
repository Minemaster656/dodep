<div class="panel glass part" id="bet-slots">
    <input type="number" name="" id="dep-amount-input" />
    <div id="slots-container">
        <div id="slot-0" class="slot"></div>
        <div id="slot-1" class="slot"></div>
        <div id="slot-2" class="slot"></div>
    </div>
    <button id="bet">Поставить</button>
    <script>
        const depAmountInput = document.getElementById("dep-amount-input");
        const slots = [document.getElementById("slot-0"), document.getElementById("slot-1"), document.getElementById("slot-2")];
        function validateSlotBetAmountInput() {
            if (isNaN(depAmountInput.value) || depAmountInput.value < 10) {
                depAmountInput.value = 10;
            }
        }

        depAmountInput.addEventListener("input", () => {
            validateSlotBetAmountInput();
        });

        function animate_response(win_row, other_rows) {
            

        }

        document.getElementById("bet").addEventListener("click", () => {
            validateSlotBetAmountInput();

            fetch("/api/v1/casino/bet/slots", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    Token: localStorage.getItem("Token"),
                },
                body: JSON.stringify({ value: depAmountInput.value }),
            })
                .then((resp) => {
                    if (resp.status != 400 && resp.status != 200) {
                        throw new Error(`Request failed with status ${resp.status}`);
                    }
                    return resp.json();
                })
                .then((data) => {
                    if (resp.status == 400) {
                        response2message(data);
                        return;
                    }
                    let rows = data.rows.map((row) => row.split(" "));
                    let win_row = data.win_row.split(" ");
                    //function make_container(index){
                    //    let c = document.createElement("div")
                    //  c.className = "slots-container"
                    //for(let i = 0; i < 3; i++){
                    //
                    //}
                    //return c
                    //}
                    animate_response(win_row, rows);
                })
                .catch((error) => {
                    console.error("Error during bet placement:", error);
                    createToast({
                        type: "error",
                        title: `Ошибка ${resp.status}`,
                        message: error,
                    });
                });
        });
    </script>
</div>
